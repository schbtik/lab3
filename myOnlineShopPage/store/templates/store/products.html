{% load static %}
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="utf-8" />
    <title>–ú–∞–≥–∞–∑–∏–Ω - –¢–æ–≤–∞—Ä–∏</title>
    <!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å—Ç–∏–ª—ñ–≤ -->
    <link rel="stylesheet" href="{% static 'store/productsStyle.css' %}">
    <link rel="icon" type="image/x-icon" href="{% static 'store/favicon.ico' %}" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" />
</head>
<body>
    <!-- –ù–∞–≤—ñ–≥–∞—Ü—ñ–π–Ω–∞ –ø–∞–Ω–µ–ª—å -->
    <nav class="navbar navbar-expand-lg" style="background-color: rgb(241, 116, 130);">
        <div class="container position-relative">
            <div class="d-flex">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <!-- –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ä—ñ–∑–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–æ–≤–∞—Ä—ñ–≤ -->
                    <li class="nav-item"><a class="nav-link" href="/">–ì–æ–ª–æ–≤–Ω–∞</a></li>
                    <li class="nav-item"><a class="nav-link" href="?category=With Sugar">With Sugar</a></li>
                    <li class="nav-item"><a class="nav-link" href="?category=Sugar-Free">Sugar Free</a></li>
                    <li class="nav-item"><a class="nav-link" href="?category=Organic">Organic</a></li>
                </ul>
            </div>
            <div class="position-absolute top-50 start-50 translate-middle">
                <!-- –õ–æ–≥–æ—Ç–∏–ø –º–∞–≥–∞–∑–∏–Ω—É -->
                <a class="navbar-brand fw-bold fs-3" href="/">ShopyShop</a>
            </div>
            <div class="d-flex ms-auto">
                <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥—É –¥–æ –∫–æ—à–∏–∫–∞ -->
                <a class="btn btn-outline-dark" href="{% url 'cart_view' %}">
                    <i class="bi-cart-fill me-1"></i>
                    –ö–æ—à–∏–∫
                </a>
            </div>
        </div>
    </nav>

    <!-- –ü–æ—à—É–∫–æ–≤–∞ —Å—Ç—Ä–æ–∫–∞ -->
    <div class="container my-4">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <form method="get" action="">
                    <div class="input-group">
                        <!-- –ü–æ–ª–µ –¥–ª—è –ø–æ—à—É–∫—É —Ç–æ–≤–∞—Ä—ñ–≤ -->
                        <input type="text" name="search" class="form-control" placeholder="–ü–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤..."
                               value="{{ search_query|default:'' }}">
                        <button class="btn btn-outline-secondary" type="submit">
                            <i class="bi bi-search"></i>
                        </button>
                        <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ -->
                        <button class="btn btn-outline-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#filterCollapse" aria-expanded="false" aria-controls="filterCollapse">
                            <i class="bi bi-funnel"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- –§—ñ–ª—å—Ç—Ä–∏ -->
    <div class="container collapse" id="filterCollapse">
        <form method="get" action="">
            <div class="row">
                <div class="col-md-4">
                    <h5>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</h5>
                    {% for category in categories %}
                    <div class="form-check">
                        <!-- –í–∏–≤–µ–¥–µ–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏ -->
                        <input class="form-check-input" type="checkbox" name="category" value="{{ category.name }}"
                        {% if category.name in selected_category %}checked{% endif %}>
                        <label class="form-check-label">{{ category.name }}</label>
                    </div>
                    {% endfor %}
                </div>
                <div class="col-md-4">
                    <h5>–ë—Ä–µ–Ω–¥</h5>
                    {% for brand in brands %}
                    <div class="form-check">
                        <!-- –í–∏–≤–µ–¥–µ–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –∑–∞ –±—Ä–µ–Ω–¥–∞–º–∏ -->
                        <input class="form-check-input" type="checkbox" name="brand" value="{{ brand }}"
                        {% if brand in selected_brands %}checked{% endif %}>
                        <label class="form-check-label">{{ brand }}</label>
                    </div>
                    {% endfor %}
                </div>
                <div class="col-md-4">
                    <h5>–¶—ñ–Ω–∞</h5>
                    <div class="mb-3">
                        <!-- –ü–æ–ª–µ –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –∑–∞ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ—é —Ü—ñ–Ω–æ—é -->
                        <input type="number" class="form-control" name="min_price" placeholder="–ú—ñ–Ω. —Ü—ñ–Ω–∞" value="{{ min_price }}">
                    </div>
                    <div class="mb-3">
                        <!-- –ü–æ–ª–µ –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –∑–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—é —Ü—ñ–Ω–æ—é -->
                        <input type="number" class="form-control" name="max_price" placeholder="–ú–∞–∫—Å. —Ü—ñ–Ω–∞" value="{{ max_price }}">
                    </div>
                    <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ -->
                    <button type="submit" class="btn btn-primary">–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä</button>
                </div>
            </div>
        </form>
    </div>

    <!-- –°–µ–∫—Ü—ñ—è —Ç–æ–≤–∞—Ä—ñ–≤ -->
    <section class="py-5">
        <div class="container px-4 px-lg-5 mt-5">
            <div class="row gx-4 gx-lg-5 justify-content-start d-flex flex-wrap">
                {% for category, products_in_category in grouped_products.items %}
                    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó -->
                    <div class="category-title mb-4">
                        <h3 class="category-name">{{ category }}</h3>
                        <div class="category-line"></div>
                    </div>
                    
                    <!-- –í–∏–≤–µ–¥–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó -->
                    {% for product in products_in_category %}
                    <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-5">
                        <a href="{% url 'product_detail' product.id %}" class="text-decoration-none">
                            <div class="card h-100 d-flex flex-column bg-white text-dark">
                                {% if product.image %}
                                <img class="card-img-top" src="{{ product.image.url }}" alt="{{ product.name }}">
                                {% else %}
                                <img class="card-img-top" src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg" alt="...">
                                {% endif %}
                                <div class="card-body p-4">
                                    <div class="text-center">
                                        <h5 class="fw-bolder" style="color: black;">{{ product.name }}</h5>
                                    </div>
                                </div>
                                <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                                    <div class="text-center">
                                        <!-- –í–∏–≤–µ–¥–µ–Ω–Ω—è —Ü—ñ–Ω–∏ —Ç–æ–≤–∞—Ä—É -->
                                        <p class="h5" style="color: black;">{{ product.price }} –≥—Ä–Ω</p>
                                    </div>
                                    <div class="text-center mt-4">
                                        <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤ –∫–æ—à–∏–∫ -->
                                        <a class="btn btn-outline-dark" href="{% url 'add_to_cart' product.id %}">–î–æ–¥–∞—Ç–∏ –≤ –∫–æ—à–∏–∫</a>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                    {% endfor %}
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- –ü—ñ–¥–≤–∞–ª -->
    <footer class="py-5 bg-dark">
        <div class="container">
            <p class="m-0 text-center text-white sweet-footer">
                &copy; –¢–≤—ñ–π –º–∞–≥–∞–∑–∏–Ω 2025 ‚Äî —Å–æ–ª–æ–¥–∫—ñ –º–∏—Ç—ñ –ø–æ—á–∏–Ω–∞—é—Ç—å—Å—è —Ç—É—Ç üçì
            </p>

            <!-- –ê–¥—Ä–µ—Å–∞ —Ç–∞ –≥—Ä–∞—Ñ—ñ–∫ —Ä–æ–±–æ—Ç–∏ -->
            <div class="row mt-4">
                <div class="col-12 col-md-4 text-center footer-address">
                    <h5>–ú–∞–≥–∞–∑–∏–Ω –Ω–∞ –≤—É–ª–∏—Ü—ñ –õ—ñ—Å–æ–≤—ñ–π</h5>
                    <p>–≤—É–ª. –õ—ñ—Å–æ–≤–∞, 12, –ö–∏—ó–≤</p>
                </div>
                <div class="col-12 col-md-4 text-center footer-address">
                    <h5>–ú–∞–≥–∞–∑–∏–Ω –Ω–∞ –≤—É–ª–∏—Ü—ñ –ü–µ—á–µ—Ä—Å—å–∫—ñ–π</h5>
                    <p>–≤—É–ª. –ü–µ—á–µ—Ä—Å—å–∫–∞, 45, –ö–∏—ó–≤</p>
                </div>
                <div class="col-12 col-md-4 text-center footer-address">
                    <h5>–ú–∞–≥–∞–∑–∏–Ω –Ω–∞ –≤—É–ª–∏—Ü—ñ –®–µ–≤—á–µ–Ω–∫–∞</h5>
                    <p>–≤—É–ª. –®–µ–≤—á–µ–Ω–∫–∞, 87, –ö–∏—ó–≤</p>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-12 col-md-4 text-center footer-hours">
                    <h5>–ì—Ä–∞—Ñ—ñ–∫ —Ä–æ–±–æ—Ç–∏</h5>
                    <p>–ü–Ω - –ü—Ç: 10:00 - 19:00</p>
                    <p>–°–±: 11:00 - 16:00</p>
                    <p>–ù–¥: –í–∏—Ö—ñ–¥–Ω–∏–π</p>
                </div>
                <div class="col-12 col-md-4 text-center footer-hours">
                    <h5>–ì—Ä–∞—Ñ—ñ–∫ —Ä–æ–±–æ—Ç–∏</h5>
                    <p>–ü–Ω - –ü—Ç: 10:00 - 19:00</p>
                    <p>–°–±: 11:00 - 16:00</p>
                    <p>–ù–¥: –í–∏—Ö—ñ–¥–Ω–∏–π</p>
                </div>
                <div class="col-12 col-md-4 text-center footer-hours">
                    <h5>–ì—Ä–∞—Ñ—ñ–∫ —Ä–æ–±–æ—Ç–∏</h5>
                    <p>–ü–Ω - –ü—Ç: 10:00 - 19:00</p>
                    <p>–°–±: 11:00 - 16:00</p>
                    <p>–ù–¥: –í–∏—Ö—ñ–¥–Ω–∏–π</p>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>
